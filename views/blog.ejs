<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('./partials/head') %>
  <title>Blog</title>
</head>

<body>
  <%- include('./partials/nav') %>

  <div class="container mt-3">
    <h1><%= locals.blog.title %></h1>
    <img src="<%= locals.blog.coverImageURL %>" width="700px" />
    <p><%= locals.blog.coverImageURL %></p>
    <p><%= locals.blog.body %></p>
  </div>


  <div class="container mt-3">
    <img src="<%= locals.blog.createdBy.profileImageURL %>" width="50px" />
    <%= locals.blog.createdBy.fullName %>
  </div>

  <div class="container mt-3">
    <h1>Comments (<%= locals.comments.length %>)</h1>
    <% if (locals.user) { %>
    <form action="/blog/comment/<%= locals.blog._id %>" method="post">
      <div class="mb-3">
        <input type="text" class="form-control" name="content" id="content" aria-describedby="content" placeholder="Enter your comment" required="true">
        <button class="btn btn-sm btn-primary" type="submit">Add</button>
      </div>
    </form>
    <% } %>
  </div>

  <div class="container mt-3">
    <% locals.comments.forEach(comment => { %>
    <div>
      <img src="<%= comment.createdBy.profileImageURL %>" width="50px" />
      <%= comment.createdBy.fullName %>:
      <pre><%= comment.content %></pre>
    </div>
    <% }) %>
  </div>

  <%- include('./partials/script') %>
</body>

</html>